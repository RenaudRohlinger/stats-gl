import{S as m}from"./main-a231d0d0.js";import*as u from"https://unpkg.com/three@0.182.0/build/three.webgpu.js";import{OrbitControls as f}from"https://unpkg.com/three@0.182.0/examples/jsm/controls/OrbitControls.js";const g=document.getElementById("container"),d=document.getElementById("render-canvas"),n=document.getElementById("overlay-canvas"),s=document.getElementById("status"),y=document.getElementById("info");if(!d.transferControlToOffscreen)throw s.textContent="OffscreenCanvas not supported in this browser",s.style.color="#f00",new Error("OffscreenCanvas not supported");const t=new m({trackFPS:!0,trackGPU:!0,trackCPT:!1,trackHz:!1});g.appendChild(t.dom);t.addTexturePanel("Diffuse");t.addTexturePanel("Normal");t.addTexturePanel("Position");t.addTexturePanel("Depth");function p(){const e=window.innerWidth,o=window.innerHeight,i=window.devicePixelRatio||1;return d.style.width=e+"px",d.style.height=o+"px",n.style.width=e+"px",n.style.height=o+"px",n.width=e*i,n.height=o*i,{width:e*i,height:o*i}}const l=p(),a=new u.PerspectiveCamera(40,window.innerWidth/window.innerHeight,1,100);a.position.set(5,2,8);const r=new f(a,n);r.target.set(0,.5,0);r.update();r.enablePan=!1;r.enableDamping=!0;const h=d.transferControlToOffscreen(),c=new Worker(new URL("/assets/worker_tsl-720d8390.js",self.location),{type:"module"});c.postMessage({type:"init",canvas:h,width:l.width,height:l.height},[h]);c.onmessage=e=>{switch(e.data.type){case"ready":s.style.display="none",y.style.display="block";break;case"stats":t.setData(e.data.data);break;case"texture":t.setTextureBitmap(e.data.name,e.data.bitmap,e.data.width,e.data.height);break;case"error":s.textContent="Error: "+e.data.message,s.style.color="#f00";break}};window.addEventListener("resize",()=>{const e=p();a.aspect=window.innerWidth/window.innerHeight,a.updateProjectionMatrix(),c.postMessage({type:"resize",width:e.width,height:e.height})});function w(){t.begin(),r.update(),a.updateMatrixWorld(),c.postMessage({type:"camera",matrix:a.matrixWorld.toArray()}),t.update(),requestAnimationFrame(w)}w();
